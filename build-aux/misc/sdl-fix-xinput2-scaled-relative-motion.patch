From 06c1b93328dabed02630bb69d3332d84b38695ff Mon Sep 17 00:00:00 2001
From: William Horvath <william@horvath.blog>
Date: Wed, 13 Aug 2025 17:38:29 -0700
Subject: [PATCH] fix xinput2 scaled relative motion

---
 src/video/x11/SDL_x11xinput2.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/video/x11/SDL_x11xinput2.c b/src/video/x11/SDL_x11xinput2.c
index 5da1bb7..722d5c0 100644
--- a/src/video/x11/SDL_x11xinput2.c
+++ b/src/video/x11/SDL_x11xinput2.c
@@ -84,15 +84,15 @@ static void parse_relative_valuators(SDL_XInput2DeviceInfo *devinfo, const XIRaw
 
         for (int j = 0; j < 2; ++j) {
             if (devinfo->number[j] == i) {
-                const double current_val = rawev->valuators.values[values_i];
+                double current_val = 0.0;
 
                 if (devinfo->relative[j]) {
-                    processed_coords[j] = current_val;
+                    current_val = rawev->raw_values[values_i];
                 } else {
-                    processed_coords[j] = devinfo->prev_coords[j] - current_val; // convert absolute to relative
+                    current_val = devinfo->prev_coords[j] - rawev->valuators.values[values_i];  // convert absolute to relative
                 }
 
-                devinfo->prev_coords[j] = current_val;
+                devinfo->prev_coords[j] = processed_coords[j] = current_val;
                 ++found;
 
                 break;
-- 
2.50.1

